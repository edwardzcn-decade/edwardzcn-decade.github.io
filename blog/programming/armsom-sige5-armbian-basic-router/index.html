<!DOCTYPE html>
<html lang="en" dir="i18n_dir">

<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ArmSom-Sige5å¼€å‘ç‰ˆä½¿ç”¨Armbianâ€”â€”åŸºç¡€è·¯ç”±</title>





<meta name="keywords" content="Armbian">




<meta name="description" content="Promised land">



<meta name="author" content="edwardzcn-decade">







  
  <link rel="canonical" href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;&#x2F;blog&#x2F;programming&#x2F;armsom-sige5-armbian-basic-router&#x2F;">


<link rel="stylesheet" href="https://www.edwardzcn.me/css/theme-vars.css">
<link rel="stylesheet" href="https://www.edwardzcn.me/css/theme-base.css">
<link rel="stylesheet" href="https://www.edwardzcn.me/css/theme-common.css">
<link rel="icon" href="https://www.edwardzcn.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.edwardzcn.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.edwardzcn.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.edwardzcn.me/apple-touch-icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">



<link rel="alternate" type="application/atom+xml" title="RSS" href="https://www.edwardzcn.me/atom.xml">



<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }
    </style>
    
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(30, 32, 48);           /* macchiato-mantle */
                --entry: rgb(36, 39, 58);           /* macchiato-base  */
                --primary: rgb(202, 211, 245);      /* macchiato-text */
                --secondary: rgb(184,192, 224);     /* macchiato-subtext1 */
                --tertiary: rgb(54, 58, 79);        /* macchiato-surface0 */
                --content: rgb(165, 173, 203);      /* macchiato-subtext0 */
                --hljs-bg: rgb(24, 25, 38);         /* macchiato-crust */
                --code-bg: rgb(24, 25, 38);         /* macchiato-crust */
                --border: rgb(30, 32, 48);          /* macchiato-mantle */
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
    
</noscript>


  

</head>

<body
class="" id="top">
  <script>
    const preft = localStorage.getItem("pref-theme");
    if (preft === "dark") {
      document.body.classList.add("dark");
    } else if (preft === "light") {
      document.body.classList.remove("dark");
    } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
      document.body.classList.add("dark");
    } else {
      document.body.classList.remove("dark");
    }
  </script>
<header class="header">
  <nav class="nav">
    <div class="logo">
      <a
        href="https:&#x2F;&#x2F;www.edwardzcn.me"
        accesskey="h"
        title="Edwardzcn blog (Alt + H)"
      >
        
        <svg
          id="cela-logo"
          xmlns="http://www.w3.org/2000/svg"
          height="30"
          viewBox="0 0 50 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="butt"
          stroke-linejoin="miter"
          stroke-miterlimit="4"
          stroke-opacity="1"
        >
          <path
            style="fill: currentColor; stroke-width: 0.0479086"
            d="M 12.270265,1.9966968 V 2.442102 h 10.985976 v 9.68036 H 12.50726 v 0.474769 h 10.748981 v 9.712398 H 1.3364433 V 1.9971379 H 0.86090326 V 22.751899 H 23.731004 V 1.9966869 Z"
          />
          <path
            style="fill: none; stroke-width: 0.574903"
            d="M 32.198343,22.621669 40.600759,2.5585859 49.04204,22.613747"
          />
          <path
            style="fill: currentColor; stroke-width: 0.574903"
            d="m 36.438812,12.346394 h 8.364306"
          />
          <rect
            style="fill: currentColor; stroke-width: 0.134146"
            width="8.8630762"
            height="0.4188053"
            x="23.518629"
            y="22.305271"
          />
          <rect
            style="fill: currentColor; stroke-width: 0.134146"
            width="9.8420162"
            height="0.4188053"
            x="1.0488266"
            y="1.9709774"
          />
        </svg>
        
        
      </a>
      <div class="logo-switches">
        <button id="theme-toggle" accesskey="t" title="(Alt + T)">
          <svg
            id="moon"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
          <svg
            id="sun"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="18"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
        </button>
        <ul class="lang-switch">
          <li>en</li>
          <li>zh</li>
        </ul>
      </div>
    </div>
    
    <ul id="menu">
      
        
        
          
        
        
      <li>
        <a href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;blog&#x2F;reading" title="Reading">
          <span>Reading</span></a>
      </li>
      
        
        
          
        
        
      <li>
        <a href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;tags" title="Tags">
          <span>Tags</span></a>
      </li>
      
        
        
          
        
        
      <li>
        <a href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;categories" title="Categories">
          <span>Categories</span></a>
      </li>
      
        
        
          
        
        
      <li>
        <a href="https:&#x2F;&#x2F;www.edwardzcn.me#" title="Search"data-search-toggle="true">
          <span>Search</span></a>
      </li>
      
        
        
          
        
        
      <li>
        <a href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;robot" title="Robot">
          <span>Robot</span>

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
  stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height=12 width=12>
  <path d="M4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6z"></path>
    <circle cx="8" cy="12" r="1.5"></circle>
    <circle cx="16" cy="12" r="1.5"></circle>


</a>
      </li>
      
        
        
          
        
        
      <li>
        <a href="https:&#x2F;&#x2F;getzola.org&#x2F;" title="Zola">
          <span>Zola</span>

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
  stroke-width="2"Â·
  stroke-linecap="round" stroke-linejoin="round" height=12 width=12>
  <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
  <path d="M15 3h6v6"></path>
  <path d="M10 14L21 3"></path>
</svg>


</a>
      </li>
      
    </ul>
    
  </nav>
</header>

<main class="main">
  
<article class="post-single">
  <header class="post-header">
      <div class="breadcrumbs">
          <a href="https:&#x2F;&#x2F;www.edwardzcn.me">Home</a>&nbsp;Â»&nbsp;
          <a href="https://www.edwardzcn.me/blog/">Posts</a>&nbsp;Â»&nbsp;
          <a href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;blog&#x2F;programming&#x2F;armsom-sige5-armbian-basic-router&#x2F;">ArmSom-Sige5å¼€å‘ç‰ˆä½¿ç”¨Armbianâ€”â€”åŸºç¡€è·¯ç”±</a>
      </div>
      <h1 class="post-title">ArmSom-Sige5å¼€å‘ç‰ˆä½¿ç”¨Armbianâ€”â€”åŸºç¡€è·¯ç”±</h1>
      
      
      <div class="post-meta">
      














<span title="2025-01-18 00:00:00 +0000">2025-01-18</span>&nbsp;Â·&nbsp;21 min&nbsp;Â·&nbsp;4127 words&nbsp;Â·&nbsp;edwardzcn-decade
      
          
&nbsp;|&nbsp;<a href="mailto:edwardzcn98@gmail.com?subject=Ref:ArmSom-Sige5å¼€å‘ç‰ˆä½¿ç”¨Armbianâ€”â€”åŸºç¡€è·¯ç”±" target="_blank">Email me</a>

      
      </div>
      
  </header>

  
  

<div class="toc">
  <details >
    <summary accesskey="c" title="(Alt + C)">
      <span class="details">Table of Contents</span>
    </summary>

    <div class="inner">
      <ul>
        
        <li>
          <a href="#gu-jian-emmcshao-xie" aria-label="å›ºä»¶eMMCçƒ§å†™">å›ºä»¶eMMCçƒ§å†™</a>
          
          <ul>
            
            <li>
              <a href="#zhun-bei-gong-zuo" aria-label="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</a>
              
            </li>
            
            <li>
              <a href="#shao-lu-bu-zou" aria-label="çƒ§å½•æ­¥éª¤">çƒ§å½•æ­¥éª¤</a>
              
              <ul>
                
                <li><a href="#windows-rkdevtool" aria-label="Windows RkDevTool">Windows RkDevTool</a></li>
                
                <li><a href="#linux-macos-rkdeveloptool" aria-label="Linux&#x2F;macOS rkdeveloptool">Linux&#x2F;macOS rkdeveloptool</a></li>
                
              </ul>
              
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a href="#armbian-chu-shi-pei-zhi" aria-label="Armbian åˆå§‹é…ç½®">Armbian åˆå§‹é…ç½®</a>
          
        </li>
        
        <li>
          <a href="#armbian-xi-tong-huan-yuan" aria-label="Armbian ç³»ç»Ÿæ¢æº">Armbian ç³»ç»Ÿæ¢æº</a>
          
          <ul>
            
            <li>
              <a href="#armbian-zhuan-shu-ruan-jian-yuan-huan-yuan" aria-label="Armbian ä¸“å±è½¯ä»¶æºæ¢æº">Armbian ä¸“å±è½¯ä»¶æºæ¢æº</a>
              
            </li>
            
            <li>
              <a href="#fa-xing-ban-ji-chu-debian-ubuntu-huan-yuan" aria-label="å‘è¡Œç‰ˆåŸºç¡€Debian&#x2F;Ubuntu æ¢æº">å‘è¡Œç‰ˆåŸºç¡€Debian&#x2F;Ubuntu æ¢æº</a>
              
            </li>
            
            <li>
              <a href="#jing-tai-ip-ssh-diao-shi" aria-label="é™æ€ IP + ssh è°ƒè¯•">é™æ€ IP + ssh è°ƒè¯•</a>
              
            </li>
            
            <li>
              <a href="#diao-zheng-dian-yuan-ji-hua-he-xiu-mian-she-zhi" aria-label="è°ƒæ•´ç”µæºè®¡åˆ’å’Œä¼‘çœ è®¾ç½®">è°ƒæ•´ç”µæºè®¡åˆ’å’Œä¼‘çœ è®¾ç½®</a>
              
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a href="#armbian-ji-chu-lu-you" aria-label="Armbian åŸºç¡€è·¯ç”±">Armbian åŸºç¡€è·¯ç”±</a>
          
          <ul>
            
            <li>
              <a href="#wang-luo-lian-jie-guan-li" aria-label="ç½‘ç»œè¿æ¥ç®¡ç†">ç½‘ç»œè¿æ¥ç®¡ç†</a>
              
            </li>
            
            <li>
              <a href="#dns-he-dhcp-pei-zhi" aria-label="DNS å’Œ DHCP é…ç½®">DNS å’Œ DHCP é…ç½®</a>
              
            </li>
            
            <li>
              <a href="#nat-he-ip-forwarding" aria-label="NAT å’Œ IP Forwarding">NAT å’Œ IP Forwarding</a>
              
              <ul>
                
                <li><a href="#qi-yong-ip-zhuan-fa" aria-label="å¯ç”¨ IP è½¬å‘">å¯ç”¨ IP è½¬å‘</a></li>
                
                <li><a href="#pei-zhi-iptables-jin-xing-nat" aria-label="é…ç½® iptables è¿›è¡Œ NAT">é…ç½® iptables è¿›è¡Œ NAT</a></li>
                
              </ul>
              
            </li>
            
          </ul>
          
        </li>
        
      </ul>
    </div>
  </details>
</div>

  

  
  <div class="post-content">
      <p>è®°å½•è¿‡å¹´å›å®¶å‰çš„ä¸€æ¬¡æŠ˜è…¾ï¼ŒæŠŠArmSom-Sige5å¼€å‘ç‰ˆ<del>åˆ·äº†ç¤¾åŒºç‰ˆArmbianåˆé™å›æ¿å­å‚å•†æä¾›çš„unofficial Armbian</del>ï¼Œé…ç½®è½¯è·¯ç”±åŠŸèƒ½å…¼æœ‰Linuxç¯å¢ƒå¼€å‘ä½“éªŒã€‚</p>
<span id="continue-reading"></span>
<p>å…è´£å£°æ˜ï¼šåˆæ¬¡æ¥è§¦å¼€å‘ç‰ˆ<del>æˆ‘ä¹Ÿå¿˜è®°å“ªé‡Œçœ‹åˆ°ArmSomçš„å¹¿å‘Šå°±ä¹°äº†ï¼Œå¯èƒ½æˆ‘åªæ˜¯å–œæ¬¢ä»–å®¶çš„ğŸ’œç´«è‰²å¤–å£³</del>ï¼Œä¸ä¿è¯æœ¬æ–‡æœ‰å‚è€ƒä»·å€¼ï¼Œä»…ä½œä¸ºä¸ªäººè¸©å‘è®°å½•ã€‚</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian0.jpeg" alt="sige5" /></p>
<h2 id="gu-jian-emmcshao-xie">å›ºä»¶eMMCçƒ§å†™</h2>
<p>å› ä¸ºæ‰‹å¤´æ²¡æœ‰å¯ç”¨çš„microSDå¡ï¼Œé€‰æ‹©type-Cæ•°æ®çº¿ç›´è¿ç”µè„‘å’Œæ¿å­çƒ§å½•å›ºä»¶åˆ°eMMCã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h3 id="zhun-bei-gong-zuo">å‡†å¤‡å·¥ä½œ</h3>
<ul>
<li>ä¸¤æ ¹type-Cçº¿ï¼Œä¸€æ ¹ç”¨äºå¼€å‘ç‰ˆå’Œç”µè„‘è¿æ¥ï¼Œä¸€æ ¹ä¸ºå¼€å‘ç‰ˆä¾›ç”µã€‚</li>
<li>å‡†å¤‡ MiniLoader ï¼ˆArmSomå®˜æ–¹æä¾›ï¼Œsige5ä¸ºRK3576_MiniLoaderAllï¼‰</li>
<li>å‡†å¤‡ System Image
<ul>
<li>æˆ‘ä½¿ç”¨çš„æ˜¯ArmSomæä¾›çš„unofficial Armbiané•œåƒ</li>
<li><a href="https://github.com/armbian/community/releases/">Armbian Community é•œåƒ</a></li>
<li>å…¶ä»–é•œåƒè¯·å‚è€ƒ<a href="https://docs.armsom.org/zh/armsom-sige5">ArmSom Sige5æ–‡æ¡£</a></li>
</ul>
</li>
<li>çƒ§å½•å·¥å…·
<ul>
<li>Windows ä½¿ç”¨ RKDevToolï¼ˆArmSomå®˜æ–¹æä¾›ï¼‰</li>
<li>Linux/macOS ä½¿ç”¨ <a href="https://github.com/rockchip-linux/rkdeveloptool">rkdeveloptool</a></li>
</ul>
</li>
</ul>
<h3 id="shao-lu-bu-zou">çƒ§å½•æ­¥éª¤</h3>
<p>è¿›å…¥ Maskrom æ¨¡å¼ï¼Œå‚è€ƒ<a href="https://docs.armsom.org/zh/getting-start/flash-img#232-usb%E7%BA%BF%E7%83%A7%E5%BD%95%E5%88%B0emmc">é•œåƒçƒ§å½•æ­¥éª¤</a></p>
<ol>
<li>æ–­å¼€æ‰€æœ‰ä¾›ç”µç”µçº¿ï¼Œè¿æ¥å¼€å‘ç‰ˆå’Œç”µè„‘</li>
<li>ä½¿ç”¨ä¸€æ ¹Type-Cçº¿è¿æ¥å¼€å‘ç‰ˆType-Cå£ï¼ˆéä¾›ç”µæ¥å£ï¼‰å’Œç”µè„‘çš„usbæ¥å£ï¼Œä½¿ç”¨è½¯ä»¶æ£€æµ‹
<ul>
<li>Windows RKDevTool ä¸‹æ–¹æ˜¾ç¤º <code>No Devices Found</code></li>
<li>Linux/macOS è¿è¡Œ <code>rkdevelotool ld</code> æ˜¾ç¤º <code>not found any devices!</code></li>
</ul>
</li>
<li>æŒ‰ä½MashromæŒ‰é”®ï¼Œä½¿ç”¨å¦ä¸€æ ¹Type-Cçº¿è¿æ¥å¼€å‘ç‰ˆType-Cå£ï¼ˆä¾›ç”µæ¥å£ï¼‰å’Œç”µæº
<ul>
<li>Windows RKDevTool ä¸‹æ–¹æ˜¾ç¤º â€œFound One Loader Deviceâ€ï¼Œå¯æ¾å¼€æŒ‰é”®</li>
<li>Linux/macOS è¿è¡Œ <code>rkdevelotool ld</code> æ£€æµ‹åˆ°è®¾å¤‡ <code>DevNo=1 Vid=0x2207,Pid=0x350e,LocationID=201    Maskrom</code>ï¼Œå¯æ¾å¼€æŒ‰é”®</li>
</ul>
</li>
<li>æ ¹æ®ä¸‹é¢çš„å¹³å°/è½¯ä»¶é€‰æ‹©è¦çƒ§å½•çš„ System Image è¿›è¡Œçƒ§å½•</li>
</ol>
<h4 id="windows-rkdevtool">Windows RkDevTool</h4>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian1.png" alt="RKDevTool" /></p>
<p>å…¶ä¸­ Loader Path ä¸ºMiniLoaderè·¯å¾„ï¼ŒImage Path ä¸ºæ‰€çƒ§å½•é•œåƒçš„è·¯å¾„ã€‚èµ·å§‹åœ°å€ä¸º 0x0000 æ— éœ€ä¿®æ”¹ï¼Œæ³¨æ„å‹¾é€‰ Write by Addressï¼Œç‚¹å‡» Run å¼€å§‹çƒ§å½•ã€‚å³ä¾§Download imageå®Œæˆå³çƒ§å½•å®Œæˆã€‚</p>
<h4 id="linux-macos-rkdeveloptool">Linux/macOS rkdeveloptool</h4>
<p>å‘½ä»¤è¡Œæ‰§è¡Œ</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">rkdeveloptool</span><span> db RK3576_MiniLoaderAll.bin
</span><span style="color:#bf616a;">rkdeveloptool</span><span> wl 0x0000 Armbian_community_25.2.0-trunk.86_Armsom-sige5_noble_vendor_6.1.75_gnome_desktop.img
</span><span style="color:#bf616a;">rkdeveloptool</span><span> rd
</span></code></pre>
<p>ç­‰å¾…çƒ§å½•å®Œæˆã€‚</p>
<h2 id="armbian-chu-shi-pei-zhi">Armbian åˆå§‹é…ç½®</h2>
<p>å¼€å‘ç‰ˆæ¥ç”µï¼Œä½¿ç”¨HDMIæ¥å£å¤–æ¥æ˜¾ç¤ºå™¨ï¼Œæˆ‘çƒ§å½•çš„æ˜¯å¸¦æœ‰GNOMEæ¡Œé¢ç¯å¢ƒçš„Armbiané•œåƒï¼Œåˆæ¬¡ç™»å½•éœ€è¦ä¸€äº›é…ç½®ï¼Œè¿˜ä¸èƒ½ç›´æ¥è¿›å…¥æ¡Œé¢ç³»ç»Ÿã€‚<a href="https://docs.armbian.com/User-Guide_Getting-Started/">Armbian é»˜è®¤ç™»å½•rootå¯†ç ä¸º1234</a>ã€‚åˆå§‹é…ç½®åŒ…å«ä»¥ä¸‹ï¼š</p>
<pre data-lang="txt" style="background-color:#2b303b;color:#c0c5ce;" class="language-txt "><code class="language-txt" data-lang="txt"><span>Welcome to Armbian!
</span><span>
</span><span>Documentation: https://docs.armbian.com/ | Community support: https://forum.armbian.com/
</span><span>
</span><span>IP address:  Network connection timeout!
</span><span>
</span><span>Create root password: ********
</span><span>Repeat root password: ********
</span><span>
</span><span>Shell: BASH
</span><span>
</span><span>Please provide a username (eg. your first name): ?
</span><span>
</span><span>Create user (Jane) password: ********
</span><span>Repeat user (Jane) password: ********
</span><span>
</span><span>...
</span></code></pre>
<p>å®Œæˆé…ç½®åæ¡Œé¢ç³»ç»Ÿä¼šé‡å¯è¿›å…¥GNOMEæ¡Œé¢ï¼Œéæ¡Œé¢ç³»ç»Ÿä¼šæ–°å»º ssh å¯¹è¯ã€‚</p>
<h2 id="armbian-xi-tong-huan-yuan">Armbian ç³»ç»Ÿæ¢æº</h2>
<p>ç”±äºå›½å†…ç½‘ç»œé—®é¢˜ï¼Œè¿›å…¥ç³»ç»Ÿé¦–å…ˆæ›´æ¢é•œåƒæº<sup class="footnote-reference" id="fr-1-1"><a href="#fn-1">[1]</a></sup> <sup class="footnote-reference" id="fr-2-1"><a href="#fn-2">[2]</a></sup>ï¼ŒArmbianæ˜¯æ„å»ºåœ¨Debianæˆ–Ubuntuå‘è¡Œç‰ˆä¸Šï¼Œéœ€è¦ç¼–è¾‘ï¼š</p>
<ul>
<li><code>/etc/apt/sources.list/armbian.list</code>armbianä¸“å±è½¯ä»¶æºå’Œ</li>
<li><code>/etc/apt/sources.list</code>å‘è¡Œç‰ˆåŸºç¡€çš„è½¯ä»¶æºã€‚</li>
</ul>
<h3 id="armbian-zhuan-shu-ruan-jian-yuan-huan-yuan">Armbian ä¸“å±è½¯ä»¶æºæ¢æº</h3>
<p>å¯å‚è€ƒ <a href="https://mirrors.tuna.tsinghua.edu.cn/help/armbian/">TUNA Mirror Help</a></p>
<p>æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„é•œåƒé€‰æ‹©è„šæœ¬</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span>
</span><span style="color:#65737e;">#!/bin/bash
</span><span style="color:#bf616a;">GREEN</span><span>=&#39;</span><span style="color:#a3be8c;">\033[0;32m</span><span>&#39;
</span><span style="color:#bf616a;">CYAN</span><span>=&#39;</span><span style="color:#a3be8c;">\033[0;36m</span><span>&#39;
</span><span style="color:#bf616a;">RED</span><span>=&#39;</span><span style="color:#a3be8c;">\033[0;31m</span><span>&#39;
</span><span style="color:#bf616a;">NC</span><span>=&#39;</span><span style="color:#a3be8c;">\033[0m</span><span>&#39;
</span><span>
</span><span style="color:#bf616a;">SOURCE_FILE</span><span>=&quot;</span><span style="color:#a3be8c;">/etc/apt/sources.list.d/armbian.list</span><span>&quot;
</span><span>
</span><span style="color:#bf616a;">CURRENT_SOURCE</span><span>=$</span><span style="color:#a3be8c;">(</span><span style="color:#bf616a;">grep -Eo </span><span>&#39;</span><span style="color:#a3be8c;">https?://[^ ]+</span><span>&#39; &quot;$</span><span style="color:#bf616a;">SOURCE_FILE</span><span>&quot; | </span><span style="color:#bf616a;">head -n</span><span style="color:#a3be8c;"> 1)
</span><span>
</span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">[[ </span><span>&quot;$</span><span style="color:#bf616a;">CURRENT_SOURCE</span><span>&quot; == *&quot;</span><span style="color:#a3be8c;">tuna.tsinghua.edu.cn</span><span>&quot;* </span><span style="color:#96b5b4;">]]</span><span>; </span><span style="color:#b48ead;">then
</span><span>    </span><span style="color:#bf616a;">CURRENT_SOURCE_NAME</span><span>=&quot;</span><span style="color:#a3be8c;">Tsinghua æ¸…åå¤§å­¦é•œåƒæº</span><span>&quot;
</span><span style="color:#b48ead;">elif </span><span style="color:#96b5b4;">[[ </span><span>&quot;$</span><span style="color:#bf616a;">CURRENT_SOURCE</span><span>&quot; == *&quot;</span><span style="color:#a3be8c;">ustc.edu.cn</span><span>&quot;* </span><span style="color:#96b5b4;">]]</span><span>; </span><span style="color:#b48ead;">then
</span><span>    </span><span style="color:#bf616a;">CURRENT_SOURCE_NAME</span><span>=&quot;</span><span style="color:#a3be8c;">USTC ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦é•œåƒæº</span><span>&quot;
</span><span style="color:#b48ead;">elif </span><span style="color:#96b5b4;">[[ </span><span>&quot;$</span><span style="color:#bf616a;">CURRENT_SOURCE</span><span>&quot; == *&quot;</span><span style="color:#a3be8c;">apt.armbian.com</span><span>&quot;* </span><span style="color:#96b5b4;">]]</span><span>; </span><span style="color:#b48ead;">then
</span><span>    </span><span style="color:#bf616a;">CURRENT_SOURCE_NAME</span><span>=&quot;</span><span style="color:#a3be8c;">å®˜æ–¹é•œåƒæº</span><span>&quot;
</span><span style="color:#b48ead;">else
</span><span>    </span><span style="color:#bf616a;">CURRENT_SOURCE_NAME</span><span>=&quot;</span><span style="color:#a3be8c;">æœªçŸ¥é•œåƒæº</span><span>&quot;
</span><span style="color:#b48ead;">fi
</span><span>
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">CYAN</span><span style="color:#a3be8c;">}======================================</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">CYAN</span><span style="color:#a3be8c;">}   Armbian Mirror Switcher Script    </span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">CYAN</span><span style="color:#a3be8c;">}======================================</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>
</span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">[ </span><span style="color:#bf616a;">-n </span><span>&quot;$</span><span style="color:#bf616a;">CURRENT_SOURCE</span><span>&quot; </span><span style="color:#96b5b4;">]</span><span>; </span><span style="color:#b48ead;">then
</span><span>    </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}å½“å‰æºï¼š</span><span>$</span><span style="color:#bf616a;">CURRENT_SOURCE</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>    </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}é•œåƒæºåç§°ï¼š</span><span>$</span><span style="color:#bf616a;">CURRENT_SOURCE_NAME</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#b48ead;">else
</span><span>    </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">RED</span><span style="color:#a3be8c;">}æœªæ£€æµ‹åˆ°æœ‰æ•ˆçš„æºé…ç½®ï¼</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#b48ead;">fi
</span><span>
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}è¯·é€‰æ‹©è¦åˆ‡æ¢çš„é•œåƒæº:</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;</span><span style="color:#a3be8c;">1. Tsinghua æ¸…åå¤§å­¦æº (https://mirrors.tuna.tsinghua.edu.cn)</span><span>&quot;
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;</span><span style="color:#a3be8c;">2. USTC ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦æº (https://mirrors.ustc.edu.cn)</span><span>&quot;
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;</span><span style="color:#a3be8c;">3. æ¢å¤ä¸ºé»˜è®¤çš„å®˜æ–¹æº (http://apt.armbian.com)</span><span>&quot;
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-ne </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">CYAN</span><span style="color:#a3be8c;">}è¯·è¾“å…¥é€‰é¡¹ (1, 2 æˆ– 3): </span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#96b5b4;">read </span><span style="color:#bf616a;">-r</span><span> choice
</span><span>
</span><span style="color:#b48ead;">case </span><span>$</span><span style="color:#bf616a;">choice </span><span style="color:#b48ead;">in
</span><span>    1</span><span style="color:#b48ead;">)
</span><span>        </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}åˆ‡æ¢åˆ° Tsinghua æº...</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>        </span><span style="color:#bf616a;">sudo</span><span> sed</span><span style="color:#bf616a;"> -i</span><span>.bak</span><span style="color:#bf616a;"> -E </span><span>&#39;</span><span style="color:#a3be8c;">s#https?://(mirrors\.(tuna\.tsinghua\.edu\.cn|ustc\.edu\.cn)|apt\.armbian\.com)#https://mirrors.tuna.tsinghua.edu.cn#g</span><span>&#39; &quot;$</span><span style="color:#bf616a;">SOURCE_FILE</span><span>&quot;
</span><span>        </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}æºå·²æˆåŠŸæ›´æ¢ä¸º Tsinghua æ¸…åå¤§å­¦é•œåƒï¼</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>        ;;
</span><span>    2</span><span style="color:#b48ead;">)
</span><span>        </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}åˆ‡æ¢åˆ° USTC æº...</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>        </span><span style="color:#bf616a;">sudo</span><span> sed</span><span style="color:#bf616a;"> -i</span><span>.bak</span><span style="color:#bf616a;"> -E </span><span>&#39;</span><span style="color:#a3be8c;">s#https?://(mirrors\.(tuna\.tsinghua\.edu\.cn|ustc\.edu\.cn)|apt\.armbian\.com)#https://mirrors.ustc.edu.cn#g</span><span>&#39; &quot;$</span><span style="color:#bf616a;">SOURCE_FILE</span><span>&quot;
</span><span>        </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}æºå·²æˆåŠŸæ›´æ¢ä¸º USTC ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦é•œåƒï¼</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>        ;;
</span><span>    3</span><span style="color:#b48ead;">)
</span><span>        </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}æ¢å¤ä¸ºé»˜è®¤çš„å®˜æ–¹æº...</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>        </span><span style="color:#bf616a;">sudo</span><span> sed</span><span style="color:#bf616a;"> -i</span><span>.bak</span><span style="color:#bf616a;"> -E </span><span>&#39;</span><span style="color:#a3be8c;">s#https?://(mirrors\.(tuna\.tsinghua\.edu\.cn|ustc\.edu\.cn)|apt\.armbian\.com)#http://apt.armbian.com#g</span><span>&#39; &quot;$</span><span style="color:#bf616a;">SOURCE_FILE</span><span>&quot;
</span><span>        </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}æºå·²æ¢å¤ä¸ºé»˜è®¤çš„å®˜æ–¹é•œåƒï¼</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>        ;;
</span><span>    *</span><span style="color:#b48ead;">)
</span><span>        </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">RED</span><span style="color:#a3be8c;">}æ— æ•ˆè¾“å…¥ï¼è¯·é‡æ–°è¿è¡Œè„šæœ¬å¹¶é€‰æ‹© 1, 2 æˆ– 3ã€‚</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>        </span><span style="color:#96b5b4;">exit</span><span> 1
</span><span>        ;;
</span><span style="color:#b48ead;">esac
</span><span>
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-ne </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">CYAN</span><span style="color:#a3be8c;">}æ˜¯å¦ç«‹å³æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•ï¼Ÿ(y/n): </span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#96b5b4;">read </span><span style="color:#bf616a;">-r</span><span> update_choice
</span><span>
</span><span style="color:#b48ead;">if </span><span style="color:#96b5b4;">[[ </span><span>&quot;$</span><span style="color:#bf616a;">update_choice</span><span>&quot; =~ ^</span><span style="color:#b48ead;">[</span><span>Yy</span><span style="color:#b48ead;">]</span><span>$ </span><span style="color:#96b5b4;">]]</span><span>; </span><span style="color:#b48ead;">then
</span><span>    </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">CYAN</span><span style="color:#a3be8c;">}æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•...</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span>    </span><span style="color:#bf616a;">sudo</span><span> apt-get update
</span><span>    </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}è½¯ä»¶åŒ…ç´¢å¼•æ›´æ–°å®Œæˆï¼</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#b48ead;">else
</span><span>    </span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">CYAN</span><span style="color:#a3be8c;">}å·²è·³è¿‡æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•ã€‚</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span><span style="color:#b48ead;">fi
</span><span>
</span><span style="color:#96b5b4;">echo </span><span style="color:#bf616a;">-e </span><span>&quot;$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">GREEN</span><span style="color:#a3be8c;">}é•œåƒæºåˆ‡æ¢æ“ä½œå®Œæˆï¼</span><span>$</span><span style="color:#a3be8c;">{</span><span style="color:#bf616a;">NC</span><span style="color:#a3be8c;">}</span><span>&quot;
</span></code></pre>
<h3 id="fa-xing-ban-ji-chu-debian-ubuntu-huan-yuan">å‘è¡Œç‰ˆåŸºç¡€Debian/Ubuntu æ¢æº</h3>
<p>æ ¹æ®ç™»å½•å¼€å‘ç‰ˆ motd ä¿¡æ¯è·å–ç¡®å®šå‘è¡Œç‰ˆåŸºç¡€<sup class="footnote-reference" id="fr-2-2"><a href="#fn-2">[2]</a></sup>ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian2.png" alt="motd" /></p>
<p>Noble è¡¨ç¤ºåŸºäº Ubuntu 24.04 (noble)</p>
<p>æˆ–è€…å¯ä»¥ä½¿ç”¨<code>cat /etc/os-release</code>è·å–è¯¦ç»†ç³»ç»Ÿä¿¡æ¯</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">edwardzcn@armsom-sige5:~$</span><span> cat /etc/os-release
</span><span style="color:#bf616a;">PRETTY_NAME</span><span>=&quot;</span><span style="color:#a3be8c;">Armbian 24.11.3 noble</span><span>&quot;
</span><span style="color:#bf616a;">NAME</span><span>=&quot;</span><span style="color:#a3be8c;">Ubuntu</span><span>&quot;
</span><span style="color:#bf616a;">VERSION_ID</span><span>=&quot;</span><span style="color:#a3be8c;">24.04</span><span>&quot;
</span><span style="color:#bf616a;">VERSION</span><span>=&quot;</span><span style="color:#a3be8c;">24.04 LTS (Noble Numbat)</span><span>&quot;
</span><span style="color:#bf616a;">VERSION_CODENAME</span><span>=</span><span style="color:#a3be8c;">noble
</span><span style="color:#bf616a;">ID</span><span>=</span><span style="color:#a3be8c;">ubuntu
</span><span style="color:#bf616a;">ID_LIKE</span><span>=</span><span style="color:#a3be8c;">debian
</span><span style="color:#bf616a;">HOME_URL</span><span>=&quot;</span><span style="color:#a3be8c;">https://www.armbian.com</span><span>&quot;
</span><span style="color:#bf616a;">SUPPORT_URL</span><span>=&quot;</span><span style="color:#a3be8c;">https://forum.armbian.com</span><span>&quot;
</span><span style="color:#bf616a;">BUG_REPORT_URL</span><span>=&quot;</span><span style="color:#a3be8c;">https://www.armbian.com/bugs</span><span>&quot;
</span><span style="color:#bf616a;">PRIVACY_POLICY_URL</span><span>=&quot;</span><span style="color:#a3be8c;">https://www.armbian.com</span><span>&quot;
</span><span style="color:#bf616a;">UBUNTU_CODENAME</span><span>=</span><span style="color:#a3be8c;">noble
</span><span style="color:#bf616a;">LOGO</span><span>=&quot;</span><span style="color:#a3be8c;">armbian-logo</span><span>&quot;
</span><span style="color:#bf616a;">ARMBIAN_PRETTY_NAME</span><span>=&quot;</span><span style="color:#a3be8c;">Armbian 24.11.3 noble</span><span>&quot;
</span></code></pre>
<p>ç¡®å®šæ˜¯ubuntuè¿˜æ˜¯debianå°±å¯ä»¥é€‰æ‹©é•œåƒæºï¼Œä»¥æ¸…åæºä¸ºä¾‹</p>
<ul>
<li>æ¸…åå¤§å­¦Debianæº https://mirrors.tuna.tsinghua.edu.cn/help/debian</li>
<li>æ¸…åå¤§å­¦Ubuntu Portsæº https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu-ports</li>
</ul>
<p>æ³¨æ„Ubuntuç³»è¦é€‰æ‹©ubuntu-portæºï¼Œæ¢æºå¯å‚è€ƒ <a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu-ports/">TUNA Mirror help</a> æˆ–è€… <a href="https://mirrors.ustc.edu.cn/help/ubuntu-ports.html">USTC Mirror Help</a></p>
<p>è¿˜æ˜¯ä»¥ä½¿ç”¨æ¸…åæºä¸ºä¾‹ï¼Œæ‰‹åŠ¨ä¿®æ”¹<code>/etc/apt/sources.list</code></p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> nano /etc/apt/sources.list
</span></code></pre>
<pre data-lang="txt" style="background-color:#2b303b;color:#c0c5ce;" class="language-txt "><code class="language-txt" data-lang="txt"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble main restricted universe multiverse
</span><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble main restricted universe multiverse
</span><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble-updates main restricted universe multiverse
</span><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble-updates main restricted universe multiverse
</span><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble-backports main restricted universe multiverse
</span><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ noble-backports main restricted universe multiverse
</span></code></pre>
<p>ç°åœ¨ä½ <del>ä¸ç”¨çœ‹ç€10+Kbpsçš„ç½‘é€Ÿå¹²ç€æ€¥</del>å¯æ”¾å¿ƒä½¿ç”¨</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> apt update
</span><span style="color:#bf616a;">sudo</span><span> apt upgrade
</span></code></pre>
<p>ç§ç§ä½ çš„æ¿å­ï¼Œè¯´å®è¯ASCIIç”»æˆ‘è¿˜æ˜¯å–œæ¬¢åŸæ¥é‚£ä¸ªå¤§Aã€‚</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> apt install neofetch</span><span style="color:#bf616a;"> -y </span><span>&amp;&amp; </span><span style="color:#bf616a;">neofetch
</span></code></pre>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian3.png" alt="neofetch" /></p>
<h3 id="jing-tai-ip-ssh-diao-shi">é™æ€ IP + ssh è°ƒè¯•</h3>
<p>æˆ‘æ›´ä¹ æƒ¯ä½¿ç”¨æˆ‘çš„å·¥ä½œæœºï¼ˆä¸€å°macï¼‰é€šè¿‡ç½‘çº¿è¿æ¥æ¿å­ï¼Œä½¿ç”¨ ssh åšåŸºç¡€è·¯ç”±è®¾ç½®ä»¥åŠä¸€äº›è½¯ä»¶æ›´æ–°ï¼Œæ¡Œé¢ç³»ç»Ÿå¼€å§‹ä¼šæœ‰å¡é¡¿ï¼ˆä»¥åŠæ— æµè§ˆå™¨ç­‰é—®é¢˜ï¼‰</p>
<p>æ’å…¥ç½‘çº¿åï¼Œå‡å®šå·¥ä½œæœºä»¥å¤ªç½‘æ¥å£è¿æ¥å¼€å‘ç‰ˆeth1æ¥å£</p>
<ul>
<li>åœ¨å·¥ä½œæœºä¸Šè®¾ç½®ç½‘ç»œ-ä»¥å¤ªç½‘<code>æ‰‹åŠ¨</code>é…ç½®IPv4ï¼ŒIPåœ°å€ <code>192.168.1.100</code>ï¼Œå­ç½‘æ©ç  <code>255.255.255.0</code></li>
<li>åœ¨å¼€å‘ç‰ˆä¸Šè®¾ç½®ç½‘ç»œ æ‰‹åŠ¨ï¼ˆManualï¼‰IPv4ï¼ˆå–æ¶ˆæ‰è‡ªåŠ¨DHCPï¼‰ï¼ŒIPåœ°å€ <code>192.168.1.1</code>ï¼ˆå¸¸è§è·¯ç”±å™¨åœ°å€ï¼‰ï¼Œå­ç½‘æ©ç  <code>255.255.255.0</code></li>
</ul>
<p><code>ping</code>æµ‹è¯•æ˜¯å¦å¯ä»¥è¿é€šï¼Œç¡®å®šICMPå¯ç”¨ï¼Œç„¶åä½¿ç”¨ Armbianåˆå§‹é…ç½®ä¸­ è®¾ç½®çš„ç”¨æˆ·å¯†ç ï¼ˆæ¡Œé¢ç³»ç»Ÿå»ºè®®è¿æ¥érootç”¨æˆ·ï¼‰</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># å·¥ä½œæœº ping å¼€å‘æ¿
</span><span style="color:#bf616a;">zmac-mini:~:</span><span>% ping</span><span style="color:#bf616a;"> -c</span><span> 5 192.168.1.1
</span><span style="color:#bf616a;">PING</span><span> 192.168.1.1 (192.168.1.1)</span><span style="color:#96b5b4;">:</span><span> 56 data bytes
</span><span style="color:#bf616a;">64</span><span> bytes from 192.168.1.1: icmp_seq=0 ttl=64 time=0.918 ms
</span><span style="color:#bf616a;">64</span><span> bytes from 192.168.1.1: icmp_seq=1 ttl=64 time=0.885 ms
</span><span style="color:#bf616a;">64</span><span> bytes from 192.168.1.1: icmp_seq=2 ttl=64 time=0.818 ms
</span><span style="color:#bf616a;">64</span><span> bytes from 192.168.1.1: icmp_seq=3 ttl=64 time=0.773 ms
</span><span style="color:#bf616a;">64</span><span> bytes from 192.168.1.1: icmp_seq=4 ttl=64 time=0.867 ms
</span><span>
</span><span style="color:#bf616a;">---</span><span> 192.168.1.1 ping statistics ---
</span><span style="color:#bf616a;">5</span><span> packets transmitted, 5 packets received, 0.0% packet loss
</span><span style="color:#bf616a;">round-trip</span><span> min/avg/max/stddev = 0.773/0.852/0.918/0.051 ms
</span></code></pre>
<p>ä½¿ç”¨ ssh å¯†ç ç™»å½•ï¼Œåç»­ Armbianå¼€å‘æ¿ ssh ç™»å½•é…ç½®ç±»ä¼¼äº VPS è¿œç¨‹ ssh ç™»å½•é…ç½®<sup class="footnote-reference" id="fr-3-1"><a href="#fn-3">[3]</a></sup>ï¼Œå¯æ ¹æ®è‡ªå·±ä¹ æƒ¯å’Œéœ€æ±‚é…ç½®å¯†é’¥ç™»å½•ç­‰ã€‚</p>
<h3 id="diao-zheng-dian-yuan-ji-hua-he-xiu-mian-she-zhi">è°ƒæ•´ç”µæºè®¡åˆ’å’Œä¼‘çœ è®¾ç½®</h3>
<p>æœ‰äº›æ—¶å€™å¯èƒ½ sshè¿æ¥ä¸€æ®µæ—¶é—´ä¼šé‡åˆ°ç³»ç»Ÿè¢«æŒ‚èµ·ï¼ˆsuspendï¼‰çš„æç¤ºï¼Œæ–¹ä¾¿èµ·è§è¿˜æ˜¯å…³æ‰GNOMEç”µæºé€‰é¡¹çš„ Automatic Suspendï¼Œ<del>æˆ‘å¹¶ä¸ç¡®å®šæ˜¯å› ä¸ºè¿™ä¸ªæŒ‚èµ·çš„ï¼Œå› ä¸ºsuspendçš„æ—¥å¿—æ²¡çœ‹æ‡‚ä¹Ÿæ²¡æ‰¾åˆ°å‘½ä»¤è¡Œè®¾ç½®æ–¹å¼</del>ã€‚</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian4.png" alt="suspend" /></p>
<h2 id="armbian-ji-chu-lu-you">Armbian åŸºç¡€è·¯ç”±</h2>
<p>å¥½çš„ä¼¼ä¹ç»ˆäºè¿›å…¥æ­£é¢˜äº†ï¼Œå…ˆè¯´è¯´ä¸ºä»€ä¹ˆçªç„¶æƒ³ç€æŠ˜è…¾å°æ¿å­ï¼Œä»¥åŠä¸ºä»€ä¹ˆé€‰æ‹©äº† Armbianï¼Œæˆ‘å…ˆæ”¾å‡ ä¸ªç†ç”±ï¼Œæœ‰æƒ³åˆ°å†è¡¥å……</p>
<ol>
<li>å…¼é¡¾è½¯è·¯ç”±ï¼Œä½†åˆä¸æƒ³è¦openwrt</li>
</ol>
<ul>
<li>openwrtå›ºç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æœ‰ä¸¤ä¸ªç‚¹ä¸ºäººè¯Ÿç—…ï¼šåŒ…ç®¡ç†é—®é¢˜ã€ä¸ºç…§é¡¾å¤§é‡ä½æ€§èƒ½çš„è®¾å¤‡åšäº†å…¼å®¹ï¼ˆä½†äº‹å®ä¸Šï¼Œä½ å¹¶ä¸ä¸€å®šä¼šç”¨è¿™äº›IoTè®¾å¤‡å¯¹å—ï¼Ÿï¼‰ã€‚Armbian åŸºäºUbuntuæˆ–è€…Debianç»™äº†æ›´å¤šç©æ³•ï¼Œç‰¹åˆ«æ˜¯å¯¹æœ‰Linuxä½¿ç”¨ç»éªŒçš„ç©å®¶/å¼€å‘è€…ï¼Œå¯ä»¥ä½¿ç”¨aptåŒ…ç®¡ç†å·¥å…·ï¼Œå……åˆ†åˆ©ç”¨è¿™ä¸€ä»·ä½å¼€å‘ç‰ˆçš„ä»·å€¼ï¼ˆæ¯”å¦‚åˆ©ç”¨æ¿è½½npuåšä¸€ç‚¹æ¨ç†ï¼Œæ¯•ç«Ÿéƒ½è‡ªç§°mini computeräº†ï¼‰</li>
<li>å¥—å£³/å±‚å çš„è½¯ä»¶æ ˆå¸¦æ¥å¾ˆå¤šè´Ÿæ‹…ã€‚ä¸ªäººä¾¿å¥½ï¼Œä¸å–œæ¬¢dockerè™šæ‹Ÿæœºå¥—å£³æœ€ååªéƒ¨ç½²ä¸€ä¸ªè½¯è·¯ç”±ã€‚</li>
<li>å¦å¤–æœ‰æŠ€æœ¯ä½¬è¯´<del>openwrt å¾ˆçµè½¦ä½†æˆ‘æ²¡é‡åˆ°è¿‡</del></li>
</ul>
<ol start="2">
<li>Use Armbian just like Ubuntu+/Debian+</li>
</ol>
<ul>
<li>è™½ç„¶æ²¡æœ‰openwrtæˆ–è€…ç¡¬è·¯ç”±æä¾›çš„é¢æ¿ï¼Œ<code>armbian-config</code>åŸºæœ¬ä¸Šè¦†ç›–äº†åº”æœ‰çš„ä¾¿æ·é…ç½®ï¼ˆå¦‚æœä½ å–œæ¬¢è¿™ç§ CLI äº¤äº’å°±æ›´é€‚åˆäº†ï¼‰ï¼Œ<del>ä¸è¿‡ä½ ç°åœ¨è¿˜ç”¨ä¸äº†ï¼Œ<code>armbian-config</code>éœ€å»ºç«‹å’Œgithub.comçš„é€šä¿¡</del></li>
<li>æ°æœ‰åŸºäºarmé•œåƒçš„æœåŠ¡éœ€è¦è·‘</li>
<li>å‰©ä½™çš„æ€§èƒ½é‡Šæ”¾å‡ºæ¥è·‘æˆ‘çš„è„šæœ¬å’Œæ£€æµ‹ğŸ¤é¢æ¿</li>
<li><del>å‡ºæ¥å§ NAS</del></li>
</ul>
<p>æœ¬èŠ‚å…ˆæ›´æ–°åŸºç¡€çš„è·¯ç”±éƒ¨åˆ†ï¼Œä»¥åŠå¯¹æ¡Œé¢ç¯å¢ƒçš„å¿…è¦è°ƒæ•´</p>
<p>å…¶å®ä¸€ä¸ªåŸºæœ¬çš„ï¼ˆè½¯ï¼‰è·¯ç”±å™¨ç³»ç»Ÿä¸»è¦åŒ…æ‹¬ä¸‹é¢å‡ é¡¹æœåŠ¡ï¼Œå¼€ç®±å³ç”¨çš„é¢æ¿æˆ–è€…ä¸€é”®å¼è„šæœ¬åªæ˜¯ç®€åŒ–å¸®åŠ©å®Œæˆè¿™äº›é…ç½®<sup class="footnote-reference" id="fr-1-2"><a href="#fn-1">[1]</a></sup>ã€‚</p>
<ul>
<li><strong>DNS</strong>ï¼šåŸŸåè§£ææœåŠ¡ï¼Œç”¨äºå°†ä¸»æœºåç§°ï¼ˆå±€åŸŸç½‘ä¸»æœºåï¼ŒåŸŸåè§£æï¼‰è§£æä¸ºIPåœ°å€
<ul>
<li>å¯ä»¥å½“ä½œï¼š<strong>å°åŒºæˆ·å-é—¨ç‰Œå·æŸ¥è¯¢ç°¿</strong></li>
<li>è¯·æ³¨æ„ï¼šå…¬ç½‘ä¸Šæä¾›DNSæœåŠ¡æ˜¯è¢«ç¦æ­¢çš„ï¼Œä¼šè¢«å°IPï¼Œè¯¥é¡¹æœåŠ¡åªå…è®¸è¿è¥å•†æä¾›</li>
<li>ç”±äºä¼ ç»ŸDNSæŸ¥è¯¢æ˜¯æ˜æ–‡ï¼Œå¯ä»¥è¢«ä¸­é—´äººæˆªç•™ä¿®æ”¹é€ æˆDNSæ±¡æŸ“ï¼Œéœ€è¦é€‚å½“è°ƒæ•´ï¼Œæ¯”å¦‚ä½¿ç”¨DoHå’ŒDoTåˆ†æµã€‚</li>
<li>å¯ç”¨å·¥å…· systemd-resolvedï¼ŒTelescopeDNSï¼ŒEasyMosdnså’Œdnsmasq</li>
</ul>
</li>
<li><strong>DHCP</strong>ï¼šåŠ¨æ€IPåœ°å€åˆ†é…åè®®ï¼ˆæœåŠ¡å™¨ï¼‰ã€‚ç»ˆç«¯ç½‘ç»œè®¾å¤‡ä¸€èˆ¬ä¼šè£…è½½DHCPå®¢æˆ·ç«¯ï¼ˆclientï¼‰æ¥è‡ªåŠ¨è¯·æ±‚å¹¶è·å–åŠ¨æ€ipã€‚ï¼ˆè½¯ï¼‰è·¯ç”±å™¨ç³»ç»Ÿçš„DHCPè¿™é‡Œå®é™…ä¸Šæ˜¯æŒ‡DHCPæœåŠ¡å™¨ï¼ˆserverï¼‰ï¼Œç”¨æ¥åˆ†å‘ç®¡ç†å±€åŸŸç½‘çš„ipåœ°å€ï¼Œå›åº”DHCPå®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚ã€‚
<ul>
<li>å¯ä»¥å½“ä½œï¼š<strong>å°åŒºä½æˆ·é—¨ç‰Œå·åœ°å€ç°¿ï¼ˆæ¬å®¶ä¼šæ›´æ–°ï¼‰</strong></li>
<li>å¯ç”¨å·¥å…·  coredhcpï¼ˆyamlé…ç½®ï¼‰/ dnsmasqï¼ˆconfé…ç½®ï¼‰</li>
</ul>
</li>
<li><strong>NAT</strong>ï¼šç½‘ç»œåœ°å€è½¬æ¢ï¼Œå»ºç«‹å±€åŸŸç½‘<code>&lt;IP,Port&gt;</code>å…ƒç»„ä¸å¤–ç½‘<code>&lt;IP,Port&gt;</code>æ˜ å°„ï¼Œå¹¶è¿›è¡Œè½¬æ¢ã€‚
<ul>
<li>å¯ä»¥å½“ä½œï¼š<strong>å°åŒºç‰¹æ´¾å·´å£«åº§ä½è¡¨ï¼ˆå·´å£«æ˜¯å’ŒåŸå¸‚æ²Ÿé€šçš„äº¤é€šæ–¹å¼ï¼‰</strong></li>
<li>å¯ç”¨å·¥å…· iptablesï¼Œnftables</li>
</ul>
</li>
<li><strong>IP Forwarding</strong>ï¼šIPè½¬å‘ï¼Œåªæœ‰å¯ç”¨åæ‰ä¼šå°†å¼€å‘ç‰ˆæŸä¸ªæ¥å£ï¼ˆæ¯”å¦‚è¿æ¥å±€åŸŸç½‘è®¾å¤‡ï¼‰ä¸ç»æœ¬åœ°ç¨‹åºè½¬å‘è‡³å¤–ç½‘æ¥å£ã€‚ä½œä¸ºæ“ä½œç³»ç»Ÿå†…æ ¸åŠŸèƒ½ï¼Œç”¨äºæ”¯æŒå¤šç½‘å¡è®¾å¤‡åœ¨ä¸åŒæ¥å£é—´çš„é€šä¿¡ã€‚
<ul>
<li>å¯ä»¥å½“ä½œï¼š<strong>æ‰‹æ‹¿åº§ä½è¡¨çš„ç‰¹æ´¾å·´å£«å¸æœº/å”®ç¥¨å‘˜</strong></li>
</ul>
</li>
</ul>
<p>åœ¨åŸºç¡€è·¯ç”±ä¸­æˆ‘éƒ½æŒ‘é€‰é…ç½®å°½é‡ç®€å•ï¼Œæ˜“å…¼å®¹çš„å·¥å…·ã€‚</p>
<h3 id="wang-luo-lian-jie-guan-li">ç½‘ç»œè¿æ¥ç®¡ç†</h3>
<p>Linuxçš„ç½‘ç»œè¿æ¥ç®¡ç†å¯ä»¥ä½¿ç”¨ <code>systemd-networkd</code> æˆ– <code>NetworkManager</code> ã€‚æˆ‘æ­å»ºçš„åŸºäºUbuntuçš„Armbianä¹ æƒ¯ç”¨åè€…ï¼Œè¿˜æä¾›äº†æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡<code>netplan</code>ã€‚ç†è§£æˆç½‘ç»œè®¡åˆ’ï¼Œç®€åŒ–ç¼–å†™ï¼Œå®Œæˆåå¯ä»¥è‡ªåŠ¨æ¸²æŸ“æˆ<code>NetworkManager</code>æè¿°ã€‚</p>
<p>ä¿®æ”¹<code>netplan</code>é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤åœ¨<code>/etc/netplan/</code>ç›®å½•ï¼Œåºå·å¤§çš„è¦†ç›–å°çš„ï¼Œä¸ºé¿å…å†²çªï¼Œåˆå¹¶ç”¨ä¸€ä¸ªæ–‡ä»¶æè¿°ï¼Œåå­—è®¾ä¸º<code>00-default-use-network-manager.yaml</code>ã€‚å¦‚æœä½ çœ‹åˆ°äº†å…¶ä»–ä»¥UUIDå‘½åçš„æ–‡ä»¶ï¼Œåˆ™æ˜¯é€šè¿‡GUIç•Œé¢ç”Ÿæˆçš„é…ç½®ï¼Œå¯ä»¥åˆ é™¤ã€‚</p>
<p>æœªç»ä¿®æ”¹çš„æ–‡ä»¶ç±»ä¼¼ï¼š</p>
<pre data-lang="yaml" style="background-color:#2b303b;color:#c0c5ce;" class="language-yaml "><code class="language-yaml" data-lang="yaml"><span style="color:#bf616a;">network</span><span>:
</span><span>  </span><span style="color:#bf616a;">version</span><span>: </span><span style="color:#d08770;">2
</span><span>  </span><span style="color:#bf616a;">renderer</span><span>: </span><span style="color:#a3be8c;">NetworkManager
</span></code></pre>
<p>ä¿®æ”¹åï¼š</p>
<pre data-lang="yaml" style="background-color:#2b303b;color:#c0c5ce;" class="language-yaml "><code class="language-yaml" data-lang="yaml"><span style="color:#bf616a;">network</span><span>:
</span><span>  </span><span style="color:#bf616a;">version</span><span>: </span><span style="color:#d08770;">2
</span><span>  </span><span style="color:#bf616a;">renderer</span><span>: </span><span style="color:#a3be8c;">NetworkManager
</span><span>  </span><span style="color:#bf616a;">ethernets</span><span>:
</span><span>    </span><span style="color:#bf616a;">eth1</span><span>:
</span><span>      </span><span style="color:#bf616a;">dhcp4</span><span>: </span><span style="color:#d08770;">false
</span><span>      </span><span style="color:#bf616a;">addresses</span><span>:
</span><span>        - </span><span style="color:#a3be8c;">192.168.1.1/24
</span><span>      </span><span style="color:#bf616a;">nameservers</span><span>:
</span><span>        </span><span style="color:#bf616a;">addresses</span><span>:
</span><span>          - </span><span style="color:#d08770;">192.168.1.1
</span></code></pre>
<p>æ‰§è¡Œ<code>sudo netplan apply</code>ä½¿æ”¹å˜ç”Ÿæ•ˆã€‚å¯ä»¥åœ¨ GNOME æ¡Œé¢çš„ç½‘ç»œé…ç½® GUI ä¸­çœ‹åˆ°æ”¹å˜ç”Ÿæ•ˆï¼ˆåç§°æš´éœ²äº†æ˜¯è°ä¿®æ”¹çš„ï¼‰ï¼š</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian5.png" alt="netplan0" /></p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian6.png" alt="netplan1" /></p>
<h3 id="dns-he-dhcp-pei-zhi">DNS å’Œ DHCP é…ç½®</h3>
<p>Armbian é»˜è®¤ä½¿ç”¨ NetworkManager ä¸­çš„ systemd-resolvedç»„ä»¶ï¼Œè¿™ä¸ª DNSstub ç›‘å¬ <code>127.0.0.53</code> ä¸Šçš„ <code>53</code>ç«¯å£ï¼Œå…¶ä»…èƒ½ç›‘å¬æœ¬æœºè¯·æ±‚è€Œä¸èƒ½æ¥å—å±€åŸŸç½‘å†…å…¶ä»–æœºå™¨çš„è¯·æ±‚ï¼Œå½“è·¯ç”±è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œå®‰è£…å¹¶ä½¿ç”¨ <code>dnsmasq</code>ä½œä¸ºDNSæœåŠ¡å™¨ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ä¸€ä¸ªè½»é‡çº§çš„DHCPæœåŠ¡å™¨ï¼Œé…ç½®æ–‡ä»¶é»˜è®¤åœ¨<code>/etc/dnsmasq.conf</code><sup class="footnote-reference" id="fr-4-1"><a href="#fn-4">[4]</a></sup>ã€‚</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> apt install dnsmasq
</span><span style="color:#bf616a;">sudo</span><span> vim /etc/dnsmasq.conf
</span></code></pre>
<p>dnsmasqé»˜è®¤é…ç½®æ³¨é‡Šï¼Œåˆçœ‹å¾ˆå“äººï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬éœ€è¦è®©è·¯ç”±è·‘èµ·æ¥å¹¶ä¸éœ€è¦è°ƒæ•´å¾ˆå¤šï¼Œå¤§å¤šæ•°é…ç½®çœ‹æ³¨é‡Šå°±èƒ½æ˜ç™½ã€‚è¿™é‡Œç»™å‡ºæˆ‘çš„æœ€å°åŒ–é…ç½®ï¼ˆè¿˜æ˜¯å‡å®šå¼€å‘ç‰ˆçš„eth1æ¥å£è¿æ¥å±€åŸŸç½‘è®¾å¤‡ï¼‰</p>
<pre data-lang="txt" style="background-color:#2b303b;color:#c0c5ce;" class="language-txt "><code class="language-txt" data-lang="txt"><span>port=0                                      # å…³é—­ DNS
</span><span>server=1.1.1.1                              # æŒ‡æ˜ä¸Šæ¸¸ DNSæœåŠ¡å™¨
</span><span>interface=eth1                              # æŒ‡å®š DHCP æœåŠ¡ç»‘å®šçš„ç½‘ç»œæ¥å£
</span><span>bind-interfaces                             # åªç›‘å¬å¯¹åº”æ¥å£çš„è¯·æ±‚ï¼ˆå³eth1 æ¥å£çš„åœ°å€ï¼‰
</span><span>dhcp-range=192.168.1.100,192.168.1.200,12h  # åˆ†é… IP åœ°å€èŒƒå›´ï¼ˆè¿™é‡Œåˆ†é…100-200ï¼‰
</span><span>dhcp-option=option:router,192.168.1.1       # æŒ‡å®šä½¿ç”¨æœ¬ç½‘å…³ ï¼ˆé»˜è®¤ç½‘å…³ï¼‰
</span><span>dhcp-option=option:dns-server,192.168.1.1   # æŒ‡å®šä½¿ç”¨æœ¬è·¯ç”±å™¨ DNS
</span><span>log-queries
</span><span>log-dhcp
</span></code></pre>
<p><code>bind-interfaces</code> è®¾ç½®ä½¿<code>dnsmasq</code>åªç›‘å¬å¯¹åº”æ¥å£è¯·æ±‚ï¼Œè€Œéç›‘å¬0.0.0.0æ‰€æœ‰å¯ç”¨åœ°å€ï¼Œç”¨äºå…¼å®¹æ­£åœ¨è¿è¡Œçš„ <code>systemd-resolved</code> ï¼ˆç›‘å¬127.0.0.53çš„53ç«¯å£ï¼‰ï¼Œé˜²æ­¢å†²çªã€‚<code>port=0</code>é…ç½®ä¹Ÿä¼šç¦ç”¨æ‰ç›‘å¬DNSè¯·æ±‚çš„æœåŠ¡ï¼Œä¹Ÿå¯ä»¥é¿å…å†²çªï¼ˆç›®å‰æˆ‘ä»¬æš‚ä¸ä½¿ç”¨ dnsmasq çš„ DNS æœåŠ¡ï¼‰ã€‚<code>dhcp-option</code>å¼€å¤´çš„è®¾ç½®éƒ½å’ŒDHCPåè®®ä¸­optionæ®µæœ‰å…³ï¼Œä¸Šè¿°ä¸¤æ¡ä¼šè®©clientç«¯è‡ªåŠ¨é…ç½®ç½‘å…³å’ŒDNSä¸ºå½“å‰é…ç½®è·¯ç”±å™¨çš„åœ°å€ã€‚</p>
<p>å¦‚æœä¸æ‰“ç®—å…¼å®¹<code>systemd-resolved</code>ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´<code>/etc/resolv.conf</code>å¹¶åœæ­¢<code>systemd-resolved</code>æœåŠ¡ï¼Œè¿™é‡Œæˆ‘ä»¬æš‚ä¸è€ƒè™‘ï¼Œä¼˜å…ˆè®©è·¯ç”±å™¨è·‘èµ·æ¥ã€‚</p>
<p>é‡å¯ <code>dnsmasq</code> æœåŠ¡ï¼ŒæŸ¥çœ‹çŠ¶æ€</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> systemctl restart dnsmasq.service
</span><span style="color:#bf616a;">sudo</span><span> systemctl status dnsmasq.service
</span></code></pre>
<p>æœåŠ¡Activeï¼Œ<del>è¯·å…ˆå¿½ç•¥é‚£æ¡Fail</del>ï¼Œç°åœ¨å¯ä»¥ä¿®æ”¹ä½ å·¥ä½œæœºçš„ç½‘ç»œè®¾ç½®ï¼Œè°ƒæ•´ä¸ºDHCPï¼ˆåŠ¨æ€è·å–IPåœ°å€ï¼‰ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://eddyblog.oss-cn-shenzhen.aliyuncs.com/2025-01-18/armbian7.png" alt="dhcp" /></p>
<h3 id="nat-he-ip-forwarding">NAT å’Œ IP Forwarding</h3>
<p>è™½ç„¶å®¢æˆ·æœºèƒ½æ‹¿åˆ°ipåœ°å€ï¼Œä½†æˆ‘ä»¬è¿˜ä¸èƒ½è®¿é—®å¤–ç½‘ã€‚æ­¤æ—¶å¼€å‘ç‰ˆå¹¶ä¸ä¼šå°†æ•°æ®åŒ…ä»eth1ï¼ˆå†…ç½‘æ¥å£ï¼‰é€’é€è‡³eth0ï¼ˆå¤–ç½‘æ¥å£ï¼‰ï¼Œä¹Ÿä¸çŸ¥é“å†…ç½‘åœ°å€å’Œå¤–ç½‘åœ°å€çš„ç¿»è¯‘è§„åˆ™ã€‚</p>
<p>IP Forwarding æ˜¯ NAT å®ç°çš„åŸºç¡€ï¼Œå®ƒè´Ÿè´£å°†æ•°æ®åŒ…åœ¨ä¸åŒæ¥å£ä¹‹é—´è½¬å‘ï¼Œè€ŒNATæ›´åƒæ˜¯å®šä¹‰è§„åˆ™æ€ä¹ˆä¿®æ”¹ä¸ºå†…ç½‘/å¤–ç½‘åœ°å€ï¼Œä¸¤è€…æ­é…é£Ÿç”¨å‘³é“æ›´ä½³ã€‚</p>
<h4 id="qi-yong-ip-zhuan-fa">å¯ç”¨ IP è½¬å‘</h4>
<p>ç¼–è¾‘<code>/etc/systl.conf</code>ï¼š</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> vim /etc/sysctl.conf
</span></code></pre>
<p>æ‰¾åˆ°å¯¹åº”è¡Œå–æ¶ˆæ³¨é‡Šï¼Œå¼€å¯ipv4å’Œipv6è½¬å‘ã€‚</p>
<pre data-lang="txt" style="background-color:#2b303b;color:#c0c5ce;" class="language-txt "><code class="language-txt" data-lang="txt"><span># Uncomment the next line to enable packet forwarding for IPv4
</span><span>net.ipv4.ip_forward=1
</span><span>
</span><span># Uncomment the next line to enable packet forwarding for IPv6
</span><span>#  Enabling this option disables Stateless Address Autoconfiguration
</span><span>#  based on Router Advertisements for this host
</span><span>net.ipv6.conf.all.forwarding=1
</span></code></pre>
<p>è¿è¡Œ<code>sudo sysctl -p</code>ä½¿æ”¹å˜ç”Ÿæ•ˆã€‚</p>
<h4 id="pei-zhi-iptables-jin-xing-nat">é…ç½® iptables è¿›è¡Œ NAT</h4>
<p>åœ¨æˆ‘çš„å®éªŒç¯å¢ƒä¸­ï¼Œå¤–ç½‘æ¥å£ä¸º <code>eth0</code>ï¼Œå†…ç½‘æ¥å£ä¸º <code>eth1</code>ï¼š</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">sudo</span><span> iptables</span><span style="color:#bf616a;"> -t</span><span> nat</span><span style="color:#bf616a;"> -A</span><span> POSTROUTING</span><span style="color:#bf616a;"> -o</span><span> eth0</span><span style="color:#bf616a;"> -j</span><span> MASQUERADE
</span><span style="color:#bf616a;">sudo</span><span> iptables</span><span style="color:#bf616a;"> -A</span><span> FORWARD</span><span style="color:#bf616a;"> -i</span><span> eth1</span><span style="color:#bf616a;"> -o</span><span> eth0</span><span style="color:#bf616a;"> -m</span><span> state</span><span style="color:#bf616a;"> --state</span><span> RELATED,ESTABLISHED</span><span style="color:#bf616a;"> -j</span><span> ACCEPT
</span><span style="color:#bf616a;">sudo</span><span> iptables</span><span style="color:#bf616a;"> -A</span><span> FORWARD</span><span style="color:#bf616a;"> -i</span><span> eth1</span><span style="color:#bf616a;"> -o</span><span> eth0</span><span style="color:#bf616a;"> -j</span><span> ACCEPT
</span></code></pre>
<p>ä¿å­˜è§„åˆ™ï¼š</p>
<pre style="background-color:#2b303b;color:#c0c5ce;"><code><span>sudo apt-get install iptables-persistent
</span><span>sudo netfilter-persistent save
</span></code></pre>
<p>ç”±äºiptablesè§„åˆ™é»˜è®¤åªåœ¨å½“å‰ä¼šè¯ç”Ÿæ•ˆã€‚ä¸€æ—¦ç³»ç»Ÿé‡å¯æˆ–è€…æœåŠ¡é‡å¯è§„åˆ™ä¼šè¢«æ¸…ç©ºï¼Œå€ŸåŠ©<code>iptables-persistent</code>æŒä¹…åŒ–è§„åˆ™åˆ°æ–‡ä»¶ä¸­ï¼Œæ¯æ¬¡ç³»ç»Ÿæˆ–æœåŠ¡å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ã€‚</p>
<p>åŸºæœ¬è·¯ç”±é…ç½® Doneï¼ç°åœ¨å¯ä»¥è¯•è¯•ç”¨å·¥ä½œæœºé€šè¿‡æ¿å­è®¿é—®å¤–éƒ¨ç½‘ç»œäº†ã€‚</p>
<hr><ol class="footnotes-list">
<li id="fn-1">
<p><a href="https://cyp0633.icu/post/armbian-r2s/">Armbianï¼Œæ›´é€‚åˆ R2S è½¯è·¯ç”±çš„ç³»ç»Ÿ</a> <a href="#fr-1-1">â†©</a> <a href="#fr-1-2">â†©2</a></p>
</li>
<li id="fn-2">
<p><a href="https://xiau.net/990.html/">å¤çš„åšå®¢ | Armbianæ¢æºæ•™ç¨‹</a>. <a href="#fr-2-1">â†©</a> <a href="#fr-2-2">â†©2</a></p>
</li>
<li id="fn-3">
<p><a href="https://linux.do/t/topic/267502#p-2476630-h-9">VPSåŸºæœ¬å®‰å…¨æªæ–½ - å¼€å‘è°ƒä¼˜ - LINUX DO</a> <a href="#fr-3-1">â†©</a></p>
</li>
<li id="fn-4">
<p><a href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/using-different-dns-servers-for-different-domains_configuring-and-managing-networking#using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains">RHEL 9 | systemd-resolved ä½¿ç”¨</a> <a href="#fr-4-1">â†©</a></p>
</li>
</ol>

  </div>
  

  <footer class="post-footer">
      
      <ul class="post-tags">
          
          
          <li><a href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;tags&#x2F;armbian&#x2F;">Armbian</a></li>
          
      </ul>
      

    
    


<nav class="paginav">
    
    <a class="prev" href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;blog&#x2F;reading&#x2F;wo-zai-tai-mian-bian-jing-diao-cha-dian-zha-chan-ye-200tian&#x2F;">
        <span class="title">Â« Prev</span>
        <br>
        <span>ã€Œæˆ‘åœ¨æ³°ç¼…è¾¹å¢ƒè°ƒæŸ¥ç”µè¯ˆäº§ä¸š200å¤©ã€</span>
    </a>
    
    
    <a class="next" href="https:&#x2F;&#x2F;www.edwardzcn.me&#x2F;blog&#x2F;programming&#x2F;armsom-sige5-armbian-cockpit&#x2F;">
        <span class="title">Next Â»</span>
        <br>
        <span>ArmSom-Sige5å¼€å‘ç‰ˆä½¿ç”¨Armbianâ€”â€”Cockpité¢æ¿</span>
    </a>
    
</nav>

    
    
  </footer>

</article>

</main>

<footer class="footer">
  
  <span>&copy; 2025 <a href="https:&#x2F;&#x2F;www.edwardzcn.me">edwardzcn-decade</a></span>
  
  <span>
      Powered by
      <a href="https://www.getzola.org/" rel="noopener noreferrer" target="_blank">Zola</a> &
      <a href="https://github.com/edwardzcn-decade/cela" rel="noopener" target="_blank">Cela</a>
  </span>
</footer>


<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
      <path d="M12 6H0l6-6z" />
  </svg>
</a>


<script>
  let menu = document.getElementById('menu')
  if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
          localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
  }

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
          e.preventDefault();
          var id = this.getAttribute("href").substr(1);
          if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
              document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                  behavior: "smooth"
              });
          } else {
              document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
          }
          if (id === "top") {
              history.replaceState(null, null, " ");
          } else {
              history.pushState(null, null, `#${id}`);
          }
      });
  });

</script>


<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
      if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
          mybutton.style.visibility = "visible";
          mybutton.style.opacity = "1";
      } else {
          mybutton.style.visibility = "hidden";
          mybutton.style.opacity = "0";
      }
  };

</script>



<script>
  document.getElementById("theme-toggle").addEventListener("click", () => {
      if (document.body.className.includes("dark")) {
          document.body.classList.remove('dark');
          localStorage.setItem("pref-theme", 'light');
      } else {
          document.body.classList.add('dark');
          localStorage.setItem("pref-theme", 'dark');
      }
  })

</script>


<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
      const container = codeblock.parentNode.parentNode;

      const copybutton = document.createElement('button');
      copybutton.classList.add('copy-code');
      copybutton.innerText = 'copy';
      function copyingDone() {
          copybutton.innerText = 'copied!';
          setTimeout(() => {
              copybutton.innerText = 'copy';
          }, 2000);
      }

      copybutton.addEventListener('click', (cb) => {
          if ('clipboard' in navigator) {
              var content = codeblock.textContent;
              if(codeblock.firstChild.tagName == 'TABLE') {
                  content = Array(...codeblock.firstChild.getElementsByTagName('span')).map((span) => { return span.textContent; }).join('');
              }
              navigator.clipboard.writeText(content);
              copyingDone();
              return;
          }

          const range = document.createRange();
          range.selectNodeContents(codeblock);
          const selection = window.getSelection();
          selection.removeAllRanges();
          selection.addRange(range);
          try {
              document.execCommand('copy');
              copyingDone();
          } catch (e) { };
          selection.removeRange(range);
      });

      if (container.classList.contains("highlight")) {
          container.appendChild(copybutton);
      } else if (container.parentNode.firstChild == container) {
          // td containing LineNos
      } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
          // table containing LineNos and code
          codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
      } else {
          // code blocks not having highlight as parent class
          codeblock.parentNode.appendChild(copybutton);
      }
  });
</script>








<div id="search-toggle-box" class="hidden">
  <div class="search-toggle-modal">
    <input type="text" id="search-toggle-input" placeholder="Type to search..." />
    <button id="search-toggle-button">Search</button>
  </div>
</div>



<script src="https://www.edwardzcn.me/js/toggle-sections.js"></script>


</body>

</html>